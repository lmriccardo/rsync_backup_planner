You are performin a REFACTOR.

Steps:

1. Create a detailed refactor plan that I have to accept it before continuing
2. If the factor is non-trivial create the `refactor/<refactor-name>` branch
    - NON-TRIVIAL=Might need multiple steps of implementation and fixing bugs

3. Follow `.agent/CONTRIBUTING.md` for structure and conventions.
4. Apply the refactor
5. Update examples, docs, and config/schema if semantics change.
6. Run relevant tests/checks.
7. Verify `.agent/CHECKLISTS/READY_FOR_REVIEW.md`.
8. Summarize what was changed and what is ready for review.